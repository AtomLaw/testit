!function(a){function c(a,b){return void 0===a?b:void 0===b?a:"error"===a||"error"===b?"error":"fail"===a||"fail"===b?"fail":"pass"}function d(a,b){b.error=a,b.type=test.typeof(a),b.message=a.message,b.stack=e(a)}function e(a){a||(a=new Error);var b="";return a.stack.split(/[\n]/).forEach(function(c){var e=!0;""===c&&(e=!1),-1!==c.indexOf(test.typeof(a))&&(e=!1),-1!==c.indexOf("getTrace")&&(e=!1);for(prop in test)-1!==c.indexOf("[as "+prop+"]")&&(e=!1);e&&(b+=b?"\n":"",b+=c.replace(/((\s+at\s+)|(^@))/,""))}),b}function f(){function a(d,e){var f;if(isNaN(d)&&isNaN(e)&&"number"==typeof d&&"number"==typeof e)return!0;if(d===e)return!0;if("function"==typeof d&&"function"==typeof e||d instanceof Date&&e instanceof Date||d instanceof RegExp&&e instanceof RegExp||d instanceof String&&e instanceof String||d instanceof Number&&e instanceof Number)return d.toString()===e.toString();if(!(d instanceof Object&&e instanceof Object))return!1;if(d.isPrototypeOf(e)||e.isPrototypeOf(d))return!1;if(d.constructor!==e.constructor)return!1;if(d.prototype!==e.prototype)return!1;if(b.indexOf(d)>-1||c.indexOf(e)>-1)return!1;for(f in e){if(e.hasOwnProperty(f)!==d.hasOwnProperty(f))return!1;if(typeof e[f]!=typeof d[f])return!1}for(f in d){if(e.hasOwnProperty(f)!==d.hasOwnProperty(f))return!1;if(typeof e[f]!=typeof d[f])return!1;switch(typeof d[f]){case"object":case"function":if(b.push(d),c.push(e),!a(d[f],e[f]))return!1;b.pop(),c.pop();break;default:if(d[f]!==e[f])return!1}}return!0}var b,c;if(arguments.length<1)return!0;for(var d=1,e=arguments.length;e>d;d++)if(b=[],c=[],!a(arguments[0],arguments[d]))return!1;return!0}var b=function(){var a=function(){this.type="group",this.name=void 0,this.status=void 0,this.comment=void 0,this.error=void 0,this.time=0,this.result={pass:0,fail:0,error:0,total:0},this.stack=[]},b=function(){this.type="test",this.status=void 0,this.comment=void 0,this.description=void 0,this.error=void 0,this.time=(new Date).getTime(),this.argument=[]},g=new a;this.root=g,g.name="root",g.time=(new Date).getTime();var h=function(b,e){switch(arguments.length){case 1:for(i in g.stack)if("group"===g.stack[i].type&&g.stack[i].name===b)return Object.create(this,{link:{value:g.stack[i]}});break;case 2:break;default:throw new RangeError("too much arguments")}var f=(new Date).getTime(),h=g;g=this.link?this.link:g;var j,k=!1;for(i in g.stack)if("group"===g.stack[i].type&&g.stack[i].name===b){j=g.stack[i],k=!0;break}k||(j=new a),j.name=b,j.linkBack=g;var l;k&&(l=j.status),j.status="pass";var m=g;g=j;try{e()}catch(n){j.status="error";var o={};d(n,o),j.error=o}return m.status=c(m.status,g.status),h.status=c(h.status,g.status),g=m,g=h,j.time+=(new Date).getTime()-f,k||g.stack.push(j),q(j),Object.create(this,{link:{value:j}})};this.group=h;var j=function(a,e){var f=new b;for(i in arguments)f.argument.push(arguments[i]);switch(arguments.length){case 0:f.status="error";var h=new RangeError("at least one argument expected"),j={};d(h,j),f.error=j;break;case 1:o(f,[a]);break;case 2:p(f,[a,e]);break;default:f.status="error";var h=new RangeError("too much arguments"),j={};d(h,j),f.error=j}return q(g),g.status=c(g.status,f.status),g.stack.push(f),Object.create(this,{link:{value:f}})};this.it=j;var k=function(a){var e=new b;for(i in arguments)e.argument.push(arguments[i]);if("Array"!==x(a)){e.status="error";var f=new RangeError("test.them expects to receive an array"),h={};d(f,h),e.error=h}else o(e,a);return q(g),g.status=c(g.status,e.status),g.stack.push(e),Object.create(this,{link:{value:e}})};this.them=k;var l=function(a,e){var f=new b;for(i in arguments)f.argument.push(arguments[i]);if(2!==arguments.length){f.status="error";var h=new RangeError("test.type expect two arguments"),j={};d(h,j),f.error=j}else if("String"!==x(e)){f.status="error";var h=new TypeError("second argument must be a String"),j={};d(h,j),f.error=j}else n(f,[a],e);return q(g),g.status=c(g.status,f.status),g.stack.push(f),Object.create(this,{link:{value:f}})};this.type=l;var m=function(a,e){var f=new b;for(i in arguments)f.argument.push(arguments[i]);if(arguments.length>2){f.status="error";var h=new RangeError("test.types expect maximum of two arguments"),j={};d(h,j),f.error=j}else if("Array"!==x(a)){f.status="error";var h=new TypeError("test.types expect array in first argument"),j={};d(h,j),f.error=j}else if(e)if("String"!==x(e)){f.status="error";var h=new TypeError("second argument must be a String"),j={};d(h,j),f.error=j}else n(f,a,e);else if(a.length<2){f.status="error";var h=new RangeError("test.types expect array with minimum 2 values, if second argument not defined"),j={};d(h,j),f.error=j}else n(f,a);return q(g),g.status=c(g.status,f.status),g.stack.push(f),Object.create(this,{link:{value:f}})};this.types=m;var n=function(a,b,c){a.description="type of argument is ",c||(c=x(b[0]));for(arg in b)if(x(b[arg]).toLowerCase()!==c.toLowerCase())return a.description+="not "+c,a.status="fail",void 0;a.description+=c,a.status="pass"},o=function(a,b){a.description=1===b.length?"argument is not ":"arguments is not ";for(arg in b)if(!b[arg])return a.description+="true",a.status="fail",void 0;a.description+="false",a.status="pass"},p=function(a,b){var c=b.shift(),d=x(c);for(arg in b)if(x(b[arg])!==d)return a.status="fail",a.description="arguments has different types",void 0;for(arg in b)if(!f(c,b[arg]))return a.description="arguments are not equal",a.status="fail",void 0;a.description="arguments are equal",a.status="pass"},q=function(a){a.result={pass:0,fail:0,error:0,total:0};for(i in a.stack)switch(a.result.total++,a.stack[i].status){case"pass":a.result.pass++;break;case"fail":a.result.fail++;break;case"error":a.result.error++}a.linkBack&&q(a.linkBack)},r=function(a){if(!this.link)throw new ReferenceError("comment can only be used in testit chain");return this.link.comment=a,this};this.comment=r;var s=function(a,b,c){if(!this.link)throw new ReferenceError("callback can only be used in testit chain");if("pass"===this.link.status&&"Function"===x(a))try{a()}catch(d){throw d}if("fail"===this.link.status&&"Function"===x(b))try{b()}catch(d){throw d}if("error"===this.link.status&&"Function"===x(c))try{c()}catch(d){throw d}return this};this.callback=s;var t=function(){return this.link?"pass"==this.link.status?!0:!1:void 0};this.result=t;var u=function(){return this.link?"test"!==this.link.type?TypeError("groups does not return arguments"):1===this.link.argument.length?this.link.argument[0]:this.link.argument:void 0};this.arguments=u;var v=function(){g.time=(new Date).getTime()-g.time,w(g)};this.done=v;var w=function(a){var b="color: green",c="color: red;",d="color: orange",e="color: blue",f="color: normal; font-weight:normal;";switch(a.type){case"group":switch(a.status){case"pass":console.groupCollapsed("%s - %c%s%c - %c%d%c/%c%d%c/%c%d%c (%c%d%c ms) %s",a.name,b,a.status,f,b,a.result.pass,f,c,a.result.fail,f,d,a.result.error,f,e,a.time,f,a.comment?a.comment:"");break;case"fail":console.group("%s - %c%s%c - %c%d%c/%c%d%c/%c%d%c (%c%d%c ms) %s",a.name,c,a.status,f,b,a.result.pass,f,c,a.result.fail,f,d,a.result.error,f,e,a.time,f,a.comment?a.comment:"");break;case"error":console.group("%s - %c%s%c - %c%d%c/%c%d%c/%c%d%c (%c%d%c ms) %s",a.name,d,a.status,f,b,a.result.pass,f,c,a.result.fail,f,d,a.result.error,f,e,a.time,f,a.comment?a.comment:"");break;default:return console.error("No status in object %s",a.name),!1}a.description&&console.log(a.description);for(i in a.stack)w(a.stack[i]);a.error&&(console.group("%c%s%c: %s",d,a.error.type,f,a.error.message),console.log(a.error.stack),console.dir(a.error.error),console.groupEnd()),console.groupEnd();break;case"test":switch(a.status){case"pass":console.groupCollapsed("%cpass%c: %s",b,f,a.comment?a.comment:"");break;case"fail":console.group("%cfail%c: %s",c,f,a.comment?a.comment:"");break;case"error":console.group("%cerror%c: %s",d,f,a.comment?a.comment:"")}a.description&&console.log(a.description),a.error&&(console.group("%c%s%c: %s",d,a.error.type,f,a.error.message),console.log(a.error.stack),console.dir(a.error.error),console.groupEnd()),console.log(a.argument),console.groupEnd()}};this.print=w;var x=function(a){var b;try{switch(a.constructor){case Array:b="Array";break;case Boolean:b="Boolean";break;case Date:b="Date";break;case Error:b="Error";break;case EvalError:b="EvalError";break;case Function:b="Function";break;case Number:b=isNaN(a)?"NaN":"Number";break;case Object:b="Object";break;case RangeError:b="RangeError";break;case ReferenceError:b="ReferenceError";break;case RegExp:b="RegExp";break;case String:b="String";break;case SyntaxError:b="SyntaxError";break;case TypeError:b="TypeError";break;case URIError:b="URIError";break;case Window:b="Window";break;case HTMLDocument:b="HTML";break;case NodeList:b="NodeList";break;default:b="object"==typeof a&&-1!==a.toString().indexOf("HTML")?"HTML":void 0}}catch(c){b=null===a?"null":typeof a}return b};this.typeof=x,this.trace=e};a.test=new b}(window);