!function(a){function d(a,b){b.error=a,b.type=test.typeof(a),b.message=a.message,b.stack=e(a)}function e(a){a||(a=new Error);var b="";return a.stack.split(/[\n]/).forEach(function(c){var e=!0;""===c&&(e=!1),-1!==c.indexOf(test.typeof(a))&&(e=!1),-1!==c.indexOf("getTrace")&&(e=!1);for(prop in test)-1!==c.indexOf("[as "+prop+"]")&&(e=!1);e&&(b+=b?"\n":"",b+=c.replace(/((\s+at\s+)|(^@))/,""))}),b}function f(){function a(d,e){var f;if(isNaN(d)&&isNaN(e)&&"number"==typeof d&&"number"==typeof e)return!0;if(d===e)return!0;if("function"==typeof d&&"function"==typeof e||d instanceof Date&&e instanceof Date||d instanceof RegExp&&e instanceof RegExp||d instanceof String&&e instanceof String||d instanceof Number&&e instanceof Number)return d.toString()===e.toString();if(!(d instanceof Object&&e instanceof Object))return!1;if(d.isPrototypeOf(e)||e.isPrototypeOf(d))return!1;if(d.constructor!==e.constructor)return!1;if(d.prototype!==e.prototype)return!1;if(b.indexOf(d)>-1||c.indexOf(e)>-1)return!1;for(f in e){if(e.hasOwnProperty(f)!==d.hasOwnProperty(f))return!1;if(typeof e[f]!=typeof d[f])return!1}for(f in d){if(e.hasOwnProperty(f)!==d.hasOwnProperty(f))return!1;if(typeof e[f]!=typeof d[f])return!1;switch(typeof d[f]){case"object":case"function":if(b.push(d),c.push(e),!a(d[f],e[f]))return!1;b.pop(),c.pop();break;default:if(d[f]!==e[f])return!1}}return!0}var b,c;if(arguments.length<1)return!0;for(var d=1,e=arguments.length;e>d;d++)if(b=[],c=[],!a(arguments[0],arguments[d]))return!1;return!0}var b=function(){var a=function(){this.type="group",this.name=void 0,this.status=void 0,this.comment=void 0,this.error=void 0,this.time=0,this.result={pass:0,fail:0,error:0,total:0},this.stack=[]},b=function(){this.type="test",this.status=void 0,this.comment=void 0,this.description=void 0,this.error=void 0,this.argument=[]},c=new a;this.root=c,c.name="root",c.time=(new Date).getTime();var g=function(b,e){switch(arguments.length){case 0:throw new RangeError("test.group expect at least 1 argument");case 1:var f=this.link?this.link.stack:c.stack;for(var g in f)if("group"===f[g].type&&f[g].name===b)return Object.create(this,{link:{value:f[g]}});throw new ReferenceError("there are no group with name: "+b);case 2:break;default:throw new RangeError("test.group expect maximum of 2 arguments")}var h=(new Date).getTime(),i=c;c=this.link?this.link:c;var j,k=!1;for(var g in c.stack)if("group"===c.stack[g].type&&c.stack[g].name===b){j=c.stack[g],k=!0;break}k||(j=new a),j.name=b,j.linkBack=c;var l;k&&(l=j.status),j.status="pass";var m=c;c=j;try{e()}catch(n){j.status="error";var o={};d(n,o),j.error=o}return c=m,c=i,j.time+=(new Date).getTime()-h,k||c.stack.push(j),t(j),Object.create(this,{link:{value:j}})};this.group=g;var h=function(a,e){var f=new b;for(var g in arguments)f.argument.push(arguments[g]);switch(arguments.length){case 0:f.status="error";var h=new RangeError("at least one argument expected"),i={};d(h,i),f.error=i;break;case 1:m(f,[a]);break;case 2:n(f,[a,e]);break;default:f.status="error";var h=new RangeError("too much arguments"),i={};d(h,i),f.error=i}return c.stack.push(f),t(c),Object.create(this,{link:{value:f}})};this.it=h;var i=function(a){var e=new b;for(var f in arguments)e.argument.push(arguments[f]);if(0===arguments.length||arguments.length>1){e.status="error";var g=new RangeError("test.them expects exactly 1 argument"),h={};d(g,h),e.error=h}else if("Array"!==v(a)){e.status="error";var g=new TypeError("test.them expects to receive an array"),h={};d(g,h),e.error=h}else m(e,a);return c.stack.push(e),t(c),Object.create(this,{link:{value:e}})};this.them=i;var j=function(a,e){var f=new b;for(var g in arguments)f.argument.push(arguments[g]);if(2!==arguments.length){f.status="error";var h=new RangeError("test.type expect two arguments"),i={};d(h,i),f.error=i}else if("String"!==v(e)){f.status="error";var h=new TypeError("second argument must be a String"),i={};d(h,i),f.error=i}else if(arrayConsist(w,e.toLowerCase()))l(f,[a],e);else{f.status="error";var h=new TypeError("second argument must be a standart type"),i={};d(h,i),f.error=i}return c.stack.push(f),t(c),Object.create(this,{link:{value:f}})};this.type=j;var k=function(a,e){var f=new b;for(var g in arguments)f.argument.push(arguments[g]);if(arguments.length>2){f.status="error";var h=new RangeError("test.types expect maximum of two arguments"),i={};d(h,i),f.error=i}else if("Array"!==v(a)){f.status="error";var h=new TypeError("test.types expect array in first argument"),i={};d(h,i),f.error=i}else if(e)if("String"!==v(e)){f.status="error";var h=new TypeError("second argument must be a String"),i={};d(h,i),f.error=i}else if(arrayConsist(w,e.toLowerCase()))l(f,a,e);else{f.status="error";var h=new TypeError("second argument must be a standart type"),i={};d(h,i),f.error=i}else if(a.length<2){f.status="error";var h=new RangeError("test.types expect array with minimum 2 values, if second argument not defined"),i={};d(h,i),f.error=i}else l(f,a);return c.stack.push(f),t(c),Object.create(this,{link:{value:f}})};this.types=k;var l=function(a,b,c){a.description="type of argument is ",c||(c=v(b[0]));for(arg in b)if(v(b[arg]).toLowerCase()!==c.toLowerCase())return a.description+="not "+c,a.status="fail",void 0;a.description+=c,a.status="pass"},m=function(a,b){a.description=1===b.length?"argument is not ":"arguments is not ";for(arg in b)if(!b[arg])return a.description+="true",a.status="fail",void 0;a.description+="false",a.status="pass"},n=function(a,b){var c=b.shift(),d=v(c);for(arg in b)if(v(b[arg])!==d)return a.status="fail",a.description="arguments has different types",void 0;for(arg in b)if(!f(c,b[arg]))return a.description="arguments are not equal",a.status="fail",void 0;a.description="arguments are equal",a.status="pass"},o=function(a){if(!this.link)throw new ReferenceError("comment can only be used in testit chain");return this.link.comment=a,this};this.comment=o;var p=function(a,b,c){if(!this.link)throw new ReferenceError("callback can only be used in testit chain");if("pass"===this.link.status&&"Function"===v(a))try{a()}catch(d){throw d}if("fail"===this.link.status&&"Function"===v(b))try{b()}catch(d){throw d}if("error"===this.link.status&&"Function"===v(c))try{c()}catch(d){throw d}return this};this.callback=p;var q=function(){return this.link?"pass"==this.link.status?!0:!1:void 0};this.result=q;var r=function(){if(this.link){if("test"!==this.link.type)return TypeError("groups does not return arguments");switch(this.link.argument.length){case 0:return void 0;case 1:return this.link.argument[0];default:return this.link.argument}}return void 0};this.arguments=r;var s=function(){c.time=(new Date).getTime()-c.time,u(c)};this.done=s;var t=function(a){a.result={pass:0,fail:0,error:0,total:0};for(var b in a.stack)switch(a.result.total++,a.stack[b].status){case"pass":a.result.pass++;break;case"fail":a.result.fail++;break;case"error":a.result.error++}a.status=a.result.error||a.error?"error":a.result.fail?"fail":"pass",a.linkBack&&t(a.linkBack)},u=function(a){var b="color: green",c="color: red;",d="color: orange",e="color: blue",f="color: normal; font-weight:normal;";switch(a.type){case"group":switch(a.status){case"pass":console.groupCollapsed("%s - %c%s%c - %c%d%c/%c%d%c/%c%d%c (%c%d%c ms) %s",a.name,b,a.status,f,b,a.result.pass,f,c,a.result.fail,f,d,a.result.error,f,e,a.time,f,a.comment?a.comment:"");break;case"fail":console.group("%s - %c%s%c - %c%d%c/%c%d%c/%c%d%c (%c%d%c ms) %s",a.name,c,a.status,f,b,a.result.pass,f,c,a.result.fail,f,d,a.result.error,f,e,a.time,f,a.comment?a.comment:"");break;case"error":console.group("%s - %c%s%c - %c%d%c/%c%d%c/%c%d%c (%c%d%c ms) %s",a.name,d,a.status,f,b,a.result.pass,f,c,a.result.fail,f,d,a.result.error,f,e,a.time,f,a.comment?a.comment:"");break;default:return console.error("No status in object %s",a.name),!1}a.description&&console.log(a.description);for(var g in a.stack)u(a.stack[g]);a.error&&(console.group("%c%s%c: %s",d,a.error.type,f,a.error.message),console.log(a.error.stack),console.dir(a.error.error),console.groupEnd()),console.groupEnd();break;case"test":switch(a.status){case"pass":console.groupCollapsed("%cpass%c: %s",b,f,a.comment?a.comment:"");break;case"fail":console.group("%cfail%c: %s",c,f,a.comment?a.comment:"");break;case"error":console.group("%cerror%c: %s",d,f,a.comment?a.comment:"")}a.description&&console.log(a.description),a.error&&(console.group("%c%s%c: %s",d,a.error.type,f,a.error.message),console.log(a.error.stack),console.dir(a.error.error),console.groupEnd()),console.log(a.argument),console.groupEnd()}};this.print=u;var v=function(a){var b;try{switch(a.constructor){case Array:b="Array";break;case Boolean:b="Boolean";break;case Date:b="Date";break;case Error:b="Error";break;case EvalError:b="EvalError";break;case Function:b="Function";break;case Number:b=isNaN(a)?"NaN":"Number";break;case Object:b="Object";break;case RangeError:b="RangeError";break;case ReferenceError:b="ReferenceError";break;case RegExp:b="RegExp";break;case String:b="String";break;case SyntaxError:b="SyntaxError";break;case TypeError:b="TypeError";break;case URIError:b="URIError";break;case Window:b="Window";break;case HTMLDocument:b="HTML";break;case NodeList:b="NodeList";break;default:b="object"==typeof a&&-1!==a.toString().indexOf("HTML")?"HTML":void 0}}catch(c){b=null===a?"null":typeof a}return b};this.typeof=v;var w=["array","boolean","date","error","evalerror","function","html","nan","nodelist","null","number","object","rangeerror","referenceerror","regexp","string","syntaxerror","typeerror","urierror","window"];this.trace=e};arrayConsist=function(a,b){for(var c in a)if(a[c]===b)return!0;return!1},a.test=new b}(window);